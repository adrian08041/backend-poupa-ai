generator client {
  provider = "prisma-client-js"
  output   = "../generated/prisma"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

 model User {
  id            String             @id @default(uuid())
  name          String
  email         String             @unique
  password      String
  role          String             @default("USER")
  subscriptions UserSubscription[]
  createdAt     DateTime           @default(now())
  updatedAt     DateTime           @updatedAt

  @@map("user")
}

model Plan {
  id                String             @id @default(uuid())
  name              String
  price             Decimal            @db.Decimal(10, 2)
  active            Boolean            @default(true)
  transaction_limit Int
  limited_reports   Boolean            @default(false)
  subscriptions     UserSubscription[]
  createdAt         DateTime           @default(now())
  updatedAt         DateTime           @updatedAt

  @@map("plan")
}

model UserSubscription {
  id         String             @id @default(uuid())
  user_id    String
  plan_id    String
  status     SubscriptionStatus @default(INACTIVE)
  expires_at DateTime?
  user       User               @relation(fields: [user_id], references: [id])
  plan       Plan               @relation(fields: [plan_id], references: [id])
  createdAt  DateTime           @default(now())
  updatedAt  DateTime           @updatedAt

  @@map("user_subscription")
}

enum Role {
  USER
  ADMIN
}

enum SubscriptionStatus {
  ACTIVE
  INACTIVE
}
